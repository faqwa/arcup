---
const { active = "home" } = Astro.props;

const normalizedBase = (import.meta.env.BASE_URL ?? "").replace(/\/$/, "");
const withBase = (path: string) =>
  path === "/"
    ? normalizedBase
      ? `${normalizedBase}/`
      : "/"
    : `${normalizedBase}${path}`;

const navItems = [
  { key: "home", label: "home", href: withBase("/") },
  { key: "why", label: "why?", href: withBase("/why") },
  { key: "how", label: "how?", href: withBase("/how") },
  { key: "projects", label: "projects", href: withBase("/projects") },
  { key: "join", label: "join", href: withBase("/join") },
];
---
<header class="site-header">
  <div class="site-brand">
    <a href={withBase("/")} class="site-brand__link">arc^ byali</a>
  </div>
  <nav aria-label="Primary navigation">
    <ul class="site-nav">
      {navItems.map((item) => (
        <li>
          <a
            href={item.href}
            class={`site-nav__link ${item.key === active ? "is-active" : ""}`.trim()}
            aria-current={item.key === active ? "page" : undefined}
          >
            {item.label}
          </a>
        </li>
      ))}
    </ul>
  </nav>
</header>
