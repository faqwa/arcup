---
const withBase = (path: string) => {
  const base = '/arcup';
  if (path === '/') return `${base}/`;
  return `${base}${path}`;
};
---

<main id="main-content" class="page-shell" aria-labelledby="definition-title">

  <!-- HEADER with proper hierarchy -->
  <header class="definition-header">
    <p class="hero-eyebrow">
      a regenerative research and stewardship collective
    </p>
    
    <!-- H1 is the main title -->
    <h1 id="definition-title">
      what if we did science that created a better world?
    </h1>
  </header>

  <!-- arc^ with pronunciation - H2 -->
  <div class="definition-title-row">
    <h2>
      <span></span>arc^
      <span class="pronunciation-inline">
        <span class="pronunciation-text">/ark-up/</span>
        <button class="audio-button" aria-label="Play pronunciation" type="button">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polygon points="5 3 19 12 5 21 5 3"></polygon>
          </svg>
        </button>
      </span>
    </h2>
    <p class="definition-eyebrow">(noun, verb, movement)</p>
  </div>

  <!-- Definition Cards -->
  <ul class="definition-card-stack">
    <li>
      <div class="definition-emoji">üó£Ô∏è</div>
      <p>
        <strong>"to arc up"</strong> (Australian slang) ‚Äî to rise loudly in defense of people and planet. 
        To take action when it matters most.
      </p>
    </li>
    <li>
      <div class="definition-emoji">üî¨</div>
      <p>
        <strong>a framework</strong> for doing plasma research that refuses extractive, profit-driven science
      </p>
    </li>
    <li>
      <div class="definition-emoji">üå±</div>
      <p>
        <strong>a practice</strong> of building tools and protocols in the open, designed for repair and restoration
      </p>
    </li>
    <li>
      <div class="definition-emoji">ü§ù</div>
      <p>
        <strong>a community</strong> of researchers, makers, and stewards working toward regenerative futures
      </p>
    </li>
  </ul>

  <!-- Personal Introduction -->
  <section class="personal-intro">
    <p class="intro-greeting">I'm Ali.</p>
    <p>
      Arc^ started as my response to a question: if I make the same choices as the good people before me, 
      what world would it create?
    </p>
    <p>
      Right now, arc^ is just one person, and it's a framework that refuses the old processes of innovation.
    </p>
  </section>

  <!-- Technical intro with WIP notice -->
  <section class="definition-intro">
    <p>
      <strong>arc^ is an experiment in doing science differently.</strong> It's plasma research guided by RE:TECH: 
      Refuse Extractive Technology. That means transparent protocols, collaborative methods, and regenerative goals.
    </p>
    <p>
      We're exploring plasma-activated water (PAW) for agriculture, remediation, and ecological restoration. 
      Instead of locking discoveries behind patents, we publish early, document openly, and share freely.
    </p>
    <p class="intro-hope">
      My hope? Arc^ will flourish into a global community of future-conscious development, changemakers, and pioneers.
    </p>
    <p class="wip-notice">
      <strong>This is a living project.</strong> We're building in public, iterating constantly, and learning as we go. 
      More experiments, protocols, and community tools are coming soon.
    </p>
  </section>

  <!-- Primary CTA Section -->
  <section class="definition-cta-section">
    <h3 class="cta-heading">where to start?</h3>
    <p class="cta-description">
      Choose your entry point based on what you're curious about.
    </p>
    <div class="definition-cta-group">
      <a href={withBase('/why')} class="button">
        <span>Why arc^ exists</span>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </a>
      <a href={withBase('/how')} class="button button-outline">
        <span>How we work</span>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </a>
      <a href={withBase('/projects')} class="button button-outline">
        <span>See the work</span>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </a>
    </div>
  </section>

  <!-- Footer -->
  <footer class="definition-footer">
    <p class="definition-note">
      built by <a href="https://xbyali.page" target="_blank" rel="noopener noreferrer">ali</a> ¬∑ 
      all research <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener noreferrer">CC BY-NC-SA</a>
    </p>
  </footer>

</main>

<script>
  // Audio pronunciation
  const audioButton = document.querySelector('.audio-button');
  if (audioButton) {
    const audio = new Audio('/arcup/audio/arcup-pronounce.ogg');
    
    audioButton.addEventListener('click', () => {
      audio.currentTime = 0;
      audio.play().catch(err => {
        console.warn('Audio playback failed:', err);
        // Fallback to mp3 if ogg fails
        const audioMp3 = new Audio('/arcup/audio/EN-AU_dc1_arc_up.mp3');
        audioMp3.play().catch(e => console.warn('MP3 playback also failed:', e));
      });
    });
  }
</script>